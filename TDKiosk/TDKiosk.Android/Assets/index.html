<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="assets/css/style.min.css">
    <link rel="stylesheet" href="assets/fonts/stylesheet.css">
    <script src="assets/js/jquery.js"></script>
</head>
<body>
    <div class="app panel">
        <div class="popup">
            <div class="popup__content">
                <div class="popup__label">Поиск сервера...</div>
            </div>
        </div>
        <div class="decor">
            <div class="decor__column"></div>
            <div class="decor__column"></div>
            <div class="decor__column"></div>
            <div class="decor__column"></div>
        </div>
        <div class="button-list">
            <div class="button button--telemost">
                <div class="button__window">
                    <div class="button__label">Частицы</div>
                    <div class="button__icon-wrapper" style="left: -38%; top:40%; width: 85%">
                        <img src="assets/images/partical_unfocus.png" class="button__icon button__icon--unfocused">
                        <img src="assets/images/partical_select.png" class="button__icon button__icon--select">
                        <img src="assets/images/partical_start.png" class="button__icon button__icon--start">
                    </div>
                </div>
            </div>
            <div class="button button--telemost">
                <div class="button__window">
                    <div class="button__label">Рисование</div>
                    <div class="button__icon-wrapper">
                        <img src="assets/images/draw_unfocus.png" class="button__icon button__icon--unfocused">
                        <img src="assets/images/draw_select.png" class="button__icon button__icon--select">
                        <img src="assets/images/draw_start.png" class="button__icon button__icon--start">
                    </div>
                </div>
            </div>
            <div class="button button--telemost">
                <div class="button__window">
                    <div class="button__label">Мишура</div>
                    <div class="button__icon-wrapper">
                        <img src="assets/images/kk_gray.png" class="button__icon button__icon--unfocused">
                        <img src="assets/images/kk_select.png" class="button__icon button__icon--select">
                        <img src="assets/images/kk_select.png" class="button__icon button__icon--start">
                    </div>
                </div>
            </div>
            <div class="button button--telemost">
                <div class="button__window">
                    <div class="button__label">Телемост</div>
                    <div class="button__icon-wrapper" style="right: -20%; width: 112%; margin-top: 40%">
                        <img src="assets/images/telemost_unfocus.png" class="button__icon button__icon--unfocused">
                        <img src="assets/images/telemost_select.png" class="button__icon button__icon--select">
                        <img src="assets/images/telemost_start.png" class="button__icon button__icon--start">
                    </div>
                </div>
            </div>
        </div>
        <div class="footer">
            <div class="footer__item-list">
                <div class="footer__item">
                    <div class="footer__step-counter">
                        <svg width="43" height="107" viewBox="0 0 43 107" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <g id="Group">
                                <path id="Vector"
                                      d="M23.09 0.830078H41.88V106.07H19.35V29.4501H1.29004V15.1401C4.52004 14.7501 7.48004 13.9801 10.17 12.8301C12.86 11.6801 14.95 10.4401 16.44 9.12006C17.93 7.80006 19.2 6.52008 20.26 5.27008C21.31 4.02008 22.06 2.96008 22.5 2.08008L23.09 0.830078Z"
                                      stroke="#45485B" stroke-miterlimit="10" />
                            </g>
                        </svg>
                    </div>
                    <div class="footer__description">
                        Для начала взаимодействия подойдите на расстояние 2 метров и махните рукой
                    </div>
                </div>
                <div class="footer__item">
                    <div class="footer__step-counter">
                        <svg width="76" height="109" viewBox="0 0 76 109" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M74.89 108.07H1.28003C1.28003 100.34 2.53002 93.3399 5.02002 87.0799C7.51002 80.8199 10.62 75.8598 14.34 72.2198C18.06 68.5798 22.09 65.0999 26.45 61.7999C30.8 58.4999 34.83 55.6799 38.52 53.3599C42.21 51.0399 45.32 48.3199 47.84 45.2099C50.36 42.0999 51.62 38.7599 51.62 35.1899C51.62 30.9799 50.31 27.6699 47.69 25.2499C45.07 22.8299 41.37 21.6199 36.57 21.6199C32.75 21.6199 29.46 22.6999 26.7 24.8499C23.94 26.9999 22.11 29.1299 21.23 31.2299L20.06 34.3899L1.27002 25.4399C1.47002 24.7599 1.77997 23.8498 2.21997 22.7198C2.65997 21.5998 3.82999 19.5999 5.73999 16.7399C7.64999 13.8799 9.84998 11.3698 12.35 9.21985C14.85 7.06985 18.38 5.09988 22.95 3.30988C27.52 1.51988 32.55 0.629883 38.03 0.629883C48.74 0.629883 57.56 3.87989 64.49 10.3899C71.41 16.8999 74.87 24.8999 74.87 34.3899C74.87 39.7199 73.72 44.5699 71.42 48.9199C69.12 53.2699 66.11 56.9799 62.39 60.0399C58.67 63.0999 54.87 65.9099 50.98 68.4799C47.09 71.0499 43.11 73.9599 39.05 77.2099C34.99 80.4599 31.91 83.7299 29.8 87.0099H74.86V108.07H74.89Z"
                                  stroke="#45485B" stroke-miterlimit="10" />
                        </svg>
                    </div>
                    <div class="footer__description">
                        Для начала взаимодействия подойдите на расстояние 2 метров и махните рукой
                    </div>
                </div>
                <div class="footer__item">
                    <div class="footer__step-counter">
                        <svg width="81" height="111" viewBox="0 0 81 111" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M61.3701 52.4404C61.8601 52.6404 62.5301 52.9204 63.3901 53.2804C64.2501 53.6504 65.7501 54.5303 67.9001 55.9203C70.0501 57.3103 71.9501 58.9203 73.5901 60.7303C75.2301 62.5403 76.7301 65.0504 78.1001 68.2504C79.4701 71.4604 80.1501 74.9704 80.1501 78.7804C80.1501 87.3904 76.5701 94.8004 69.4001 101.02C62.2301 107.23 52.7802 110.34 41.0302 110.34C36.0402 110.34 31.2301 109.76 26.6101 108.62C21.9901 107.47 18.2101 106.09 15.2701 104.47C12.3301 102.85 9.75015 101.25 7.53015 99.6603C5.30015 98.0703 3.70009 96.6604 2.72009 95.4404L1.18018 93.7504L14.7601 79.5104C14.9601 79.8004 15.2701 80.2103 15.7101 80.7203C16.1501 81.2303 17.1501 82.1404 18.7201 83.4404C20.2901 84.7404 21.9402 85.8904 23.6702 86.8904C25.4102 87.8904 27.6301 88.7904 30.3501 89.5704C33.0601 90.3504 35.8701 90.7404 38.7501 90.7404C44.5701 90.7404 49.0401 89.4703 52.1401 86.9203C55.2501 84.3803 56.8002 81.1503 56.8002 77.2303C56.8002 73.3203 55.2701 70.0903 52.2101 67.5403C49.1501 65.0003 44.9302 63.7203 39.5502 63.7203H28.2501V44.9304H38.7501C43.1501 44.9304 46.6401 43.7603 49.2101 41.4103C51.7801 39.0603 53.0602 35.9803 53.0602 32.1603C53.0602 28.6403 51.7901 25.7504 49.2401 23.5004C46.7001 21.2504 43.2001 20.1204 38.7501 20.1204C34.9301 20.1204 31.3501 20.9504 28.0001 22.6204C24.6501 24.2804 22.2401 25.9004 20.7701 27.4604L18.4901 29.8804L4.99011 16.3804C5.28011 15.9904 5.72018 15.4403 6.31018 14.7303C6.90018 14.0203 8.30015 12.7404 10.5302 10.8804C12.7602 9.02037 15.1401 7.42037 17.6901 6.07037C20.2401 4.72037 23.6101 3.48038 27.8201 2.33038C32.0301 1.18038 36.4302 0.610352 41.0302 0.610352C51.6502 0.610352 60.1901 3.41038 66.6401 9.01038C73.1001 14.6104 76.3301 21.5704 76.3301 29.8904C76.3301 32.9704 75.8001 35.8504 74.7501 38.5104C73.7001 41.1804 72.4501 43.3404 71.0101 45.0104C69.5701 46.6704 68.1202 48.0803 66.6802 49.2303C65.2402 50.3803 63.9501 51.2004 62.8301 51.6904L61.3701 52.4404Z"
                                  stroke="#45485B" stroke-miterlimit="10" />
                        </svg>
                    </div>
                    <div class="footer__description">
                        Для начала взаимодействия подойдите на расстояние 2 метров и махните рукой
                    </div>
                </div>
            </div>
            <button class="footer__button-close">
                отмена
            </button>
        </div>

    </div>
    <script>
        var state = 0;

        $(".button").on("click", function () {
            var buttinIndex = $(".button").index($(this));
            indexDecorColumn = buttinIndex;
            state = buttinIndex + 1;
            polygon = get_polygon(100 / 4 * indexDecorColumn + 100 / 8)
            $(".footer").css("clip-path", polygon)
            $(".footer").attr("style", "clip-path:" + polygon);
            decorColumns = $(".decor__column");
            decorColumns.removeClass("active")
            decorColumns.eq(indexDecorColumn).addClass("active")
            setActive(true)
            $(this).addClass("button--active", indexDecorColumn);
        })

        setActive = function (isActive) {
            if (isActive) {
                $(".button").removeClass("button--active")
                $(".button").addClass("button--unfocused")
                $(".panel").addClass("panel--active")
                $(".footer").addClass("footer--show")
            } else {
                $(".button").removeClass("button--active")
                $(".button").removeClass("button--unfocused")
                $(this).removeClass("button--active");
                $(".panel").removeClass("panel--active")
                $(".footer").removeClass("footer--show")
                $(".decor__column").removeClass("active")
            }
        }

        function get_polygon(precent) {
            var polygon = new Polygon()
            polygon.addPoint(0, 0)
            polygon.addPoint(precent - 2, 0)
            polygon.addPoint(precent, 10)
            polygon.addPoint(precent + 2, 0)
            polygon.addPoint(100, 0)
            polygon.addPoint(100, 100)
            polygon.addPoint(0, 100)
            return polygon.build()
        }

        Polygon = function () {
            points = [];
            _this = this;

            this.addPoint = function (x, y) {
                points.push([x, y])
            }

            this.build = function () {
                str = "";

                for (var i = 0; i < points.length; ++i) {

                    if (i != 0) {
                        str + ","
                    }

                    str += points[i][0] + "% " + points[i][1] + "%"

                    if (i < points.length - 1) {
                        str += ",";
                    }
                }

                return "polygon(" + str + ")"
            }
        }


        function getState() {
            return state;
        }

        function showPopup(isShow) {
            if (isShow) { $(".popup").addClass("popup__show") }
            else { $(".popup").removeClass("popup__show") }
        }

        function setState(stateIndex) {
            state = stateIndex;
            if (state == 0) {                
                setActive(false);
                return;
            }
            else {
                $(".button").eq(stateIndex - 1).click()
            }
        }

        $(".footer__button-close").on("click", function () {
            setActive(false)
            state = 0
        })
    </script>
</body>
</html>